<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donation</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
    <header>
        <div>
            <div class="navbar bg-[#F7F6E2] fixed top-0 z-10 w-full transition-opacity ease-in-out duration-300">
                <div class="navbar-start">
                    <button id="blogs" class="btn bg-purple-600 text-white">Blog</button>
                </div>
                <div class="navbar-center flex flex-col md:flex-row items-center">
                    <img class="pr-3" src="./pictures/logo.png" alt="Logo">
                    <p class="font-semibold text-center md:text-left">Donate For Bangladesh</p>
                </div>
                <div class="navbar-end">
                    <div class="flex items-center">
                        <img class="pr-3" src="./pictures/coin.png" alt="Coins">
                        <div class="font-semibold" id="balance">
                            <p id="mB">8400</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="pt-24">
        <div>
            <section class="flex justify-center mt-8 space-x-3">
                <!-- Donation and History buttons -->
                <button class="btn bg-purple-600 text-white" id="donateButton" onclick="hHidden()">Donation</button>
                <button  class="btn text-purple-600" id="historyButton" onclick="dHidden()">History</button>
            </section>

        </div>
        <section class="" id="HHistory">
            <div class="History mb-8">
                <div class="hstr bg-[#F7F6E2] mb-3 text-center">

                </div>
                
            </div>
        </section>
        <!-- Cards Section -->
        <section class="px-4 md:px-16 " id="bodysec">
            <div>
                <!-- First Card -->
                <div class="card card-side bg-white shadow-xl mt-6 flex flex-col md:flex-row">
                    <figure>
                        <img class="w-full md:w-10/12 ml-0 md:ml-6" src="./pictures/noakhali.png"
                            alt="image not found" />
                    </figure>
                    <div class="card-body mx-4 md:mx-12 ml-2">
                        <p class="btn w-2/12" id="amount-button1"><img src="./pictures/coin.png" alt="">1000</p>
                        <h2 class="card-title text-center md:text-left">Donate for Flood at Noakhali, Bangladesh</h2>
                        <p>The recent floods in Noakhali have caused significant damage to homes and infrastructure.
                            Your donation will help provide essential supplies and support to those affected by this
                            disaster.</p>
                        <div class="form-control">
                            <input id="addmoney1" type="text" placeholder="Write Donation amount"
                                class="input input-bordered" required />
                        </div>
                        <div class="card-actions justify-end">
                            <button class="btn bg-purple-600 text-white w-full" id="donateNowButton1">Donate
                                Now</button>
                        </div>
                    </div>
                </div>

                <!-- Second Card -->
                <div class="card card-side bg-white shadow-xl mt-6 flex flex-col md:flex-row">
                    <figure>
                        <img class="w-full md:w-10/12 ml-0 md:ml-6" src="./pictures/feni.png" alt="image not found" />
                    </figure>
                    <div class="card-body mx-4 md:mx-12">
                        <p class="btn w-2/12" id="amount-button2"><img src="./pictures/coin.png" alt="">1200</p>
                        <h2 class="card-title text-center md:text-left">Donate for Flood Relief in Feni, Bangladesh</h2>
                        <p>The recent floods in Feni have devastated local communities, leading to severe disruption and
                            loss. Your generous donation will help provide immediate aid, including food.</p>
                        <div class="form-control">
                            <input id="addmoney2" type="text" placeholder="Write Donation amount"
                                class="input input-bordered" required />
                        </div>
                        <div class="card-actions justify-end">
                            <button class="btn bg-purple-600 text-white w-full" id="donateNowButton2">Donate
                                Now</button>
                        </div>
                    </div>
                </div>

                <!-- Third Card -->
                <div class="card card-side bg-white shadow-xl mt-6 flex flex-col md:flex-row">
                    <figure>
                        <img class="w-full md:w-10/12 ml-0 md:ml-6" src="./pictures/quota-protest.png"
                            alt="image not found" />
                    </figure>
                    <div class="card-body mx-4 md:mx-12">
                        <p class="btn w-2/12" id="amount-button3"><img src="./pictures/coin.png" alt="">1200</p>
                        <h2 class="card-title text-center md:text-left">Aid for Injured in the Quota Movement</h2>
                        <p>The recent Quota movement has resulted in numerous injuries and significant hardship for many
                            individuals. Your support is crucial in providing medical assistance and rehabilitation.</p>
                        <div class="form-control">
                            <input id="addmoney3" type="text" placeholder="Write Donation amount"
                                class="input input-bordered" required />
                        </div>
                        <div class="card-actions justify-end">
                            <button class="btn bg-purple-600 text-white w-full" id="donateNowButton3">Donate
                                Now</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer footer-center bg-base-300 text-base-content p-4">
        <aside>
            <p>Copyright Â© 2024 - All right reserved by Donate For Bangladesh </p>
            <p>Develop by Mahmudul Hasan Molla &trade;</p>
        </aside>
    </footer>

    <!-- Modal -->
    <dialog id="my_modal_1" class="modal">
        <div class="modal-box">
            <h3 class="text-lg font-bold text-center">Congrats!</h3>
            <div class="flex justify-center">
                <img src="./pictures/coin.png" alt="">
            </div>

            <p class="py-4 text-center">Thank you for your generous donation!</p>
            <div class="modal-action flex justify-center">
                <form method="dialog">
                    <button class="btn bg-purple-600 text-white">Close confirmation</button>
                </form>
            </div>
        </div>
    </dialog>

    <script>

        blogs.addEventListener('click', (event) => {
            event.preventDefault();
            window.location.href = 'blog.html';
        });

        let currentBalance = parseInt(document.getElementById('mB').textContent);
        let history = [];


        function dHidden() {
            document.getElementById("bodysec").style.display = 'none';
            document.getElementById('HHistory').style.display = 'block';
            document.getElementById('historyButton').style.background='#9333EA';
            document.getElementById('historyButton').style.color='white';
            document.getElementById('donateButton').style.background='white';
            document.getElementById('donateButton').style.color='black';


            
            let historyDiv = document.querySelector('.History');
            for (let i = 0; i < history.length; i++) {
                console.log(history[i].historyBalance);
                
                let hstr=document.querySelector('.hstr');

                let paragraph1 = document.createElement('p');
                paragraph1.textContent = history[i].historyBalance;

                let paragraph2 = document.createElement('p');
                paragraph2.textContent = history[i].date;


               
                hstr.appendChild(paragraph1);
                hstr.appendChild(paragraph2);
                historyDiv.appendChild(hstr);
            }
        }
        function hHidden() {
            document.getElementById("bodysec").style.display = 'block';
            document.getElementById('HHistory').style.display = 'none';

            document.getElementById('historyButton').style.background='white';
            document.getElementById('historyButton').style.color='black';
            document.getElementById('donateButton').style.background='#9333EA';
            document.getElementById('donateButton').style.color='white';
            
        }

        // Function to handle donation logic
        function handleDonation(amountInputId, amountButtonId) {
            const inpValue = parseInt(document.getElementById(amountInputId).value);

            if (0 >= inpValue || isNaN(inpValue)) {
                alert("Invalid input");
            } else if (inpValue > currentBalance) {
                alert("Insufficient balance");
            } else {
                // Deduct from balance
                currentBalance -= inpValue;
                document.getElementById('mB').textContent = currentBalance;

                // Update donation amount
                let donateBalance = parseInt(document.getElementById(amountButtonId).textContent);
                donateBalance += inpValue;
                document.getElementById(amountButtonId).textContent = donateBalance;

                // Clear input field
                document.getElementById(amountInputId).value = "";

                // Log donation history
                let historyBalance = inpValue;
                historyBalance+=" BDT Donate for bangladesh"
                let date = new Date();
                let newData = [...history, { historyBalance, date }];
                // let newData={historyBalance,date}
                history = newData;
                console.log(history);

                // Show success modal
                const successModal = document.getElementById('my_modal_1');
                successModal.showModal();
            }
        }

        // Event listeners for each button
        document.getElementById("donateNowButton1").addEventListener("click", function () {
            handleDonation("addmoney1", "amount-button1");
        });
        document.getElementById("donateNowButton2").addEventListener("click", function () {
            handleDonation("addmoney2", "amount-button2");
        });
        document.getElementById("donateNowButton3").addEventListener("click", function () {
            handleDonation("addmoney3", "amount-button3");
        });

        // Close modal event
        document.querySelector('.modal-action button').addEventListener('click', function () {
            const successModal = document.getElementById('my_modal_1');
            successModal.close();
        });

        // Change navbar opacity on scroll
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('opacity-90');
            } else {
                navbar.classList.remove('opacity-90');
            }
        });
    </script>

</body>

</html>